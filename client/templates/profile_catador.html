
<template name="catadorprofile">
  {{> Nav}}

  <div class="container-responsive">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-body">
              {{#if Template.subscriptionsReady}}
                {{> catadorDetails}}
              {{else}}
                {{> loadingcatadorprofile}}
              {{/if}}
            </div> <!-- /panel-body -->
          </div> <!-- /panel -->
        </div>
      </div> <!-- /row -->
 
    </div> <!-- /container-fluid -->
  </div> <!-- /container-responsive -->
</template>


<!-- while subscriptions are loading, display this -->
<template name="loadingcatadorprofile">
  Loading catador profile
</template>

<template name="catadorDetails">
  <div class="row">
    <div class="col-md-12 text-center">
      <div class="image-container">
        {{> imageView}}
      </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-12">
      <h1 class="only-bottom-margin text-center">{{name}}</h1>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-12">
      <hr>
      <span class="text-muted">Telefone 1: </span>{{telephone1}} {{operator_telephone1}}
      {{#if whatsapp1}}
        <i class="fa fa-whatsapp"></i>
      {{/if}}
      <br>
      <span class="text-muted">Telefone 2: </span>{{telephone2}} {{operator_telephone2}}<br>
      <br>
      <span class="text-muted">Region: </span>{{region}}<br>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <hr>
      <div class="profile-services">
        <h4>Services</h4>
        {{services}}
        <!-- Images are placeholders. TODO: use better icons in helper function services.
        Return images conditional on services offered by the catador. -->
        <img href="/img/metals.png" src="/img/metals.png" alt="service-icon-metals">
        <img src="/img/recyclables.png">
        <img src="/img/trash.png">
      </div>
      <hr>
      <button class="btn btn-default pull-right"><i class="glyphicon glyphicon-pencil"></i> Atualizar</button>
    </div>
  </div> <!-- /row -->
</template>

<template name="imageView">
  {{#each images}}
    <div>
      <a href="{{this.url}}" target="_blank"><img class="img-circle avatar avatar-original" 
        style="-webkit-user-select:none; display:block; margin:auto;" 
        src="{{this.url}}" alt=""></a>        
    </div>
  {{/each}}
</template>