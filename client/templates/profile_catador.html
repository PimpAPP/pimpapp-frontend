
<template name="catadorprofile">
  {{> Nav}}

  <div class="container-responsive">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-body">
              {{#if Template.subscriptionsReady}}
                {{> catadorDetails}}
              {{else}}
                {{> loadingcatadorprofile}}
              {{/if}}
            </div> <!-- /panel-body -->
          </div> <!-- /panel -->
        </div>
      </div> <!-- /row -->
 
    </div> <!-- /container-fluid -->
  </div> <!-- /container-responsive -->
</template>


<!-- while subscriptions are loading, display this -->
<template name="loadingcatadorprofile">
  Loading catador profile
</template>

<template name="catadorDetails">
  <div class="row">
    <div class="col-md-12 text-center">
      <div class="image-container">
        <!-- {{> imageView}} --> 
        <!-- PLACEHOLDER TO SEE WHAT IMAGE POSITIONING LOOKS LIKE NOW,
        Before getting pictures from catadores -->
        <a href="/img/pimp.png" target="_blank"><img class="img-circle avatar avatar-original" 
        style="-webkit-user-select:none; display:block; margin:auto;" 
        src="/img/pimp.png" alt=""></a>     
      </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-12">
      <h1 class="only-bottom-margin text-center">{{name}}</h1>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-12">
      <hr>
      <span class="text-muted">Telefone 1: </span>{{telephone1}} {{operator_telephone1}}
      {{#if whatsapp1}}
        <i class="fa fa-whatsapp"></i>
      {{/if}}
      <br>
      <span class="text-muted">Telefone 2: </span>{{telephone2}} {{operator_telephone2}}<br>
      {{#if whatsapp2}}
        <i class="fa fa-whatsapp"></i>
      {{/if}}
      <br>
      <span class="text-muted">Região: </span>{{region}}<br>
      <span class="text-muted">Utiliza veículo motorizada? </span>{{motorizedVehicle}}<br>

    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <hr>
      <div class="profile-services">
        <!-- TODO: update images to correct icons -->
        <h4>Serviços</h4>
        {{#if services_recyclable}}
          <img src="/img/recyclables.png">
        {{/if}}
        {{#if services_construction}}
          <img src="/img/recyclables.png">
        {{/if}}
        {{#if services_freight}}
          <img src="/img/recyclables.png">
        {{/if}}
        {{#if services_furniture}}
          <img src="/img/recyclables.png">
        {{/if}}
        {{#if services_metals}}
          <img src="/img/recyclables.png">
        {{/if}}
        {{#if services_electronics}}
          <img src="/img/recyclables.png">
        {{/if}}
        {{#if services_other_materials}}
          <img src="/img/recyclables.png">
        {{/if}}

        <!-- Images are placeholders. TODO: use better icons in helper function services.
        Return images conditional on services offered by the catador. -->
        <!-- TODO: remove these images once Django API is updated to include service types-->
        <img href="/img/metals.png" src="/img/metals.png" alt="service-icon-metals">
        <img src="/img/trash.png">

        <button class="btn btn-default pull-right profile-button-services"><i class="glyphicon glyphicon-info-sign"></i></button>
      </div>
      <hr>
      <!-- <button ><i class="glyphicon glyphicon-pencil"></i> Atualizar</button> -->
<!--       {{#afModal class="btn btn-default pull-right profile-button-update" collection="Posts" operation="method"}}
        Atualizar
      {{/afModal}} -->
      {{> autoformModals}}
      {{#afModal class="btn btn-default pull-right profile-button-update" 
        collection="CatadoresUpdate" meteormethod="updateCatadorDetails" operation="insert"}}
        Atualizar
      {{/afModal}}      
    </div>
  </div> <!-- /row -->
</template>

<template name="imageView">
  {{#each images}}
    <div>
      <a href="{{this.url}}" target="_blank"><img class="img-circle avatar avatar-original" 
        style="-webkit-user-select:none; display:block; margin:auto;" 
        src="{{this.url}}" alt=""></a>        
    </div>
  {{/each}}
</template>



<template name="modalServices">
    <div class="modal fade modal-services-info">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title">Serviços</h4>
                </div>

                <div class="modal-body">
                      <ul>
                        <li>Coleta de material reciclável. Retirada de materiais como papel, vidro, latas, embalagens, vidro, embalagem longa vida, entre outros, que são vendidos e compõem a renda do catador.</li>
                        <li>Coleta de Resíduos de Construção Civil. Retirada de entulho, latas de tintas, madeira, entre outros para destinação correta em pontos de entrega ou depósitos especializados.</li>
                        <li>Coleta de Resíduos Volumosos. Retirada de sofás, geladeira, fogão, e outros objetos de grande volume para descarte em locais especializados e\ou assistência técnicas.</li>
                        <li>Coleta de ferro e metais. Retirada de cobre, alumínio, ferro, entre outros para comercialização. 
                          Coleta de resíduos eletroeletrônicos. Retirada de computadores, pilhas, baterias, entre outros para comercialização e descarto correto.</li>
                        <li>Coleta de Outros materiais. Retirada de outros objetos e\ou materiais não listados anteriormente, tais como roupas, peças de automóveis, etc.</li>
                        <li>Frete e Carreto. Serviço de retirada e entrega de objetos, materiais. Pequenas mudanças.</li>
                      </ul>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>
</template>